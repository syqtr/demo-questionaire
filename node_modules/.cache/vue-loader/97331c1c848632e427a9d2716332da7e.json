{"remainingRequest":"/Users/sytruong/demo-questionaire/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/sytruong/demo-questionaire/src/components/FlowForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sytruong/demo-questionaire/src/components/FlowForm.vue","mtime":1635747848179},{"path":"/Users/sytruong/demo-questionaire/node_modules/cache-loader/dist/cjs.js","mtime":1627740747088},{"path":"/Users/sytruong/demo-questionaire/node_modules/babel-loader/lib/index.js","mtime":1627740747092},{"path":"/Users/sytruong/demo-questionaire/node_modules/cache-loader/dist/cjs.js","mtime":1627740747088},{"path":"/Users/sytruong/demo-questionaire/node_modules/vue-loader/lib/index.js","mtime":1634035958257}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCi8qIQogIENvcHlyaWdodCAoYykgMjAyMCAtIHByZXNlbnQsIERJVERPVCBMdGQuIC0gTUlUIExpY2VuY2UKICBodHRwczovL2dpdGh1Yi5jb20vZGl0ZG90LWRldi92dWUtZmxvdy1mb3JtCiAgaHR0cHM6Ly93d3cuZGl0ZG90LmhyL2VuCiovCgppbXBvcnQgRmxvd0Zvcm1RdWVzdGlvbiBmcm9tICcuL0Zsb3dGb3JtUXVlc3Rpb24udnVlJwppbXBvcnQgUXVlc3Rpb25Nb2RlbCwgeyBDaG9pY2VPcHRpb24sIExpbmtPcHRpb24sIFF1ZXN0aW9uVHlwZSB9IGZyb20gJy4uL21vZGVscy9RdWVzdGlvbk1vZGVsJwppbXBvcnQgTGFuZ3VhZ2VNb2RlbCBmcm9tICcuLi9tb2RlbHMvTGFuZ3VhZ2VNb2RlbCcKaW1wb3J0IHsgSXNNb2JpbGUgfSBmcm9tICcuLi9taXhpbnMvSXNNb2JpbGUnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0Zsb3dGb3JtJywKICBjb21wb25lbnRzOiB7CiAgICBGbG93Rm9ybVF1ZXN0aW9uCiAgfSwKICAKICBwcm9wczogewogICAgcXVlc3Rpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICB2YWxpZGF0b3I6IHZhbHVlID0+IHZhbHVlLmV2ZXJ5KHEgPT4gcSBpbnN0YW5jZW9mIFF1ZXN0aW9uTW9kZWwpCiAgICB9LCAKICAgIGxhbmd1YWdlOiB7CiAgICAgIHR5cGU6IExhbmd1YWdlTW9kZWwsCiAgICAgIGRlZmF1bHQ6ICgpID0+IG5ldyBMYW5ndWFnZU1vZGVsKCkKICAgIH0sCiAgICBwcm9ncmVzc2JhcjogewogICAgICB0eXBlOiBCb29sZWFuLCAKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHN0YW5kYWxvbmU6IHsKICAgICAgdHlwZTogQm9vbGVhbiwgCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBuYXZpZ2F0aW9uOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sIAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgdGltZXI6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICB0aW1lclN0YXJ0U3RlcDogW1N0cmluZywgTnVtYmVyXSwKICAgIHRpbWVyU3RvcFN0ZXA6IFtTdHJpbmcsIE51bWJlcl0KICB9LAoKICBtaXhpbnM6IFsKICAgIElzTW9iaWxlLAogIF0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjb21wbGV0ZWQ6IGZhbHNlLAogICAgICBzdWJtaXR0ZWQ6IGZhbHNlLAogICAgICBhY3RpdmVRdWVzdGlvbkluZGV4OiAwLAogICAgICBxdWVzdGlvbkxpc3Q6IFtdLAogICAgICBxdWVzdGlvbkxpc3RBY3RpdmVQYXRoOiBbXSwKICAgICAgcmV2ZXJzZTogZmFsc2UsCiAgICAgIHRpbWVyT246IGZhbHNlLAogICAgICB0aW1lckludGVydmFsOiBudWxsLAogICAgICB0aW1lOiAwCiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bkxpc3RlbmVyKQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9uS2V5VXBMaXN0ZW5lciwgdHJ1ZSkKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uQmVmb3JlVW5sb2FkKQoKICAgIHRoaXMuc2V0UXVlc3Rpb25zKCkKICAgIHRoaXMuY2hlY2tUaW1lcigpCiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLm9uS2V5RG93bkxpc3RlbmVyKQogICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLm9uS2V5VXBMaXN0ZW5lciwgdHJ1ZSkKICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCB0aGlzLm9uQmVmb3JlVW5sb2FkKQogICAgCiAgICB0aGlzLnN0b3BUaW1lcigpCiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIG51bUFjdGl2ZVF1ZXN0aW9ucygpIHsKICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25MaXN0QWN0aXZlUGF0aC5sZW5ndGgKICAgIH0sCgogICAgYWN0aXZlUXVlc3Rpb24oKSB7CiAgICAgIHJldHVybiB0aGlzLnF1ZXN0aW9uTGlzdEFjdGl2ZVBhdGhbdGhpcy5hY3RpdmVRdWVzdGlvbkluZGV4XQogICAgfSwKCiAgICBhY3RpdmVRdWVzdGlvbklkKCkgewogICAgICBjb25zdCBxdWVzdGlvbiA9IHRoaXMucXVlc3Rpb25Nb2RlbHNbdGhpcy5hY3RpdmVRdWVzdGlvbkluZGV4XQoKICAgICAgaWYgKHRoaXMuaXNPbkxhc3RTdGVwKSB7CiAgICAgICAgcmV0dXJuICdfc3VibWl0JwogICAgICB9CgogICAgICBpZiAocXVlc3Rpb24gJiYgcXVlc3Rpb24uaWQpIHsKICAgICAgICByZXR1cm4gcXVlc3Rpb24uaWQKICAgICAgfQoKICAgICAgcmV0dXJuIG51bGwKICAgIH0sCgogICAgbnVtQ29tcGxldGVkUXVlc3Rpb25zKCkgewogICAgICBsZXQgbnVtID0gMAoKICAgICAgdGhpcy5xdWVzdGlvbkxpc3RBY3RpdmVQYXRoLmZvckVhY2gocXVlc3Rpb24gPT4gewogICAgICAgIGlmIChxdWVzdGlvbi5hbnN3ZXJlZCkgewogICAgICAgICAgKytudW0KICAgICAgICB9CiAgICAgIH0pCgogICAgICByZXR1cm4gbnVtCiAgICB9LAoKICAgIHBlcmNlbnRDb21wbGV0ZWQoKSB7CiAgICAgIGlmICghdGhpcy5udW1BY3RpdmVRdWVzdGlvbnMpIHsKICAgICAgICByZXR1cm4gMAogICAgICB9CgogICAgICByZXR1cm4gTWF0aC5mbG9vcigodGhpcy5udW1Db21wbGV0ZWRRdWVzdGlvbnMgLyB0aGlzLm51bUFjdGl2ZVF1ZXN0aW9ucykgKiAxMDApCiAgICB9LAoKICAgIGlzT25MYXN0U3RlcCgpIHsKICAgICAgcmV0dXJuIHRoaXMubnVtQWN0aXZlUXVlc3Rpb25zID4gMCAmJiB0aGlzLmFjdGl2ZVF1ZXN0aW9uSW5kZXggPT09IHRoaXMucXVlc3Rpb25MaXN0QWN0aXZlUGF0aC5sZW5ndGgKICAgIH0sIAoKICAgIGlzT25UaW1lclN0YXJ0U3RlcCgpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlUXVlc3Rpb25JZCA9PT0gdGhpcy50aW1lclN0YXJ0U3RlcCkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KCiAgICAgIGlmICghdGhpcy50aW1lck9uICYmICF0aGlzLnRpbWVyU3RhcnRTdGVwICYmIHRoaXMuYWN0aXZlUXVlc3Rpb25JbmRleCA9PT0gMCkgewogICAgICAgIHJldHVybiB0cnVlCiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKCiAgICBpc09uVGltZXJTdG9wU3RlcCgpIHsKICAgICAgaWYgKHRoaXMuc3VibWl0dGVkKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogICAgICAKICAgICAgaWYgKHRoaXMuYWN0aXZlUXVlc3Rpb25JZCA9PT0gdGhpcy50aW1lclN0b3BTdGVwKSB7CiAgICAgICAgcmV0dXJuIHRydWUgCiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZQogICAgfSwKCiAgICBxdWVzdGlvbk1vZGVsczogewogICAgICBjYWNoZTogZmFsc2UsCgogICAgICBnZXQoKSB7CiAgICAgICAgaWYgKHRoaXMucXVlc3Rpb25zICYmIHRoaXMucXVlc3Rpb25zLmxlbmd0aCkgewogICAgICAgICAgcmV0dXJuIHRoaXMucXVlc3Rpb25zCiAgICAgICAgfQoKICAgICAgICBjb25zdCBxdWVzdGlvbnMgPSBbXQoKICAgICAgICBpZiAoIXRoaXMucXVlc3Rpb25zKSB7CiAgICAgICAgICBjb25zdCBjbGFzc01hcCA9IHsKICAgICAgICAgICAgJ29wdGlvbnMnOiBDaG9pY2VPcHRpb24sCiAgICAgICAgICAgICdkZXNjcmlwdGlvbkxpbmsnOiBMaW5rT3B0aW9uCiAgICAgICAgICB9CgogICAgICAgICAgdGhpcwogICAgICAgICAgICAuJHNsb3RzCiAgICAgICAgICAgIC5kZWZhdWx0CiAgICAgICAgICAgIC5maWx0ZXIocSA9PiBxLnRhZyAmJiBxLnRhZy5pbmRleE9mKCdRdWVzdGlvbicpICE9PSAtMSkKICAgICAgICAgICAgLmZvckVhY2gocSA9PiB7CiAgICAgICAgICAgICAgY29uc3QgYXR0cnMgPSBxLmRhdGEuYXR0cnMKICAgICAgICAgICAgICBsZXQgbW9kZWwgPSBuZXcgUXVlc3Rpb25Nb2RlbCgpCgogICAgICAgICAgICAgIGlmIChxLmNvbXBvbmVudEluc3RhbmNlLnF1ZXN0aW9uICE9PSBudWxsKSB7CiAgICAgICAgICAgICAgICBtb2RlbCA9IHEuY29tcG9uZW50SW5zdGFuY2UucXVlc3Rpb24KICAgICAgICAgICAgICB9IAoKICAgICAgICAgICAgICBpZiAocS5kYXRhLm1vZGVsKSB7CiAgICAgICAgICAgICAgICBtb2RlbC5hbnN3ZXIgPSBxLmRhdGEubW9kZWwudmFsdWUKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIE9iamVjdC5rZXlzKG1vZGVsKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoYXR0cnNba2V5XSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbW9kZWxba2V5XSA9PT0gJ2Jvb2xlYW4nKSB7CiAgICAgICAgICAgICAgICAgICAgbW9kZWxba2V5XSA9IGF0dHJzW2tleV0gIT09IGZhbHNlCiAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoa2V5IGluIGNsYXNzTWFwKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QKICAgICAgICAgICAgICAgICAgICAgIGNsYXNzUmVmZXJlbmNlID0gY2xhc3NNYXBba2V5XSwKICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgPSBbXQoKICAgICAgICAgICAgICAgICAgICBhdHRyc1trZXldLmZvckVhY2gob3B0aW9uID0+IHsKICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGluc3RhbmNlID0gbmV3IGNsYXNzUmVmZXJlbmNlKCkKCiAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhpbnN0YW5jZSkuZm9yRWFjaChpbnN0YW5jZUtleSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcHRpb25baW5zdGFuY2VLZXldICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZVtpbnN0YW5jZUtleV0gPSBvcHRpb25baW5zdGFuY2VLZXldCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5wdXNoKGluc3RhbmNlKQogICAgICAgICAgICAgICAgICAgIH0pCgogICAgICAgICAgICAgICAgICAgIG1vZGVsW2tleV0gPSBvcHRpb25zCiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKGtleSkgewogICAgICAgICAgICAgICAgICAgICAgY2FzZSAndHlwZSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QudmFsdWVzKFF1ZXN0aW9uVHlwZSkuaW5kZXhPZihhdHRyc1trZXldKSAhPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RlbFtrZXldID0gYXR0cnNba2V5XQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcXVlc3Rpb25UeXBlS2V5IGluIFF1ZXN0aW9uVHlwZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXN0aW9uVHlwZUtleS50b0xvd2VyQ2FzZSgpID09PSBhdHRyc1trZXldLnRvTG93ZXJDYXNlKCkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxba2V5XSA9IFF1ZXN0aW9uVHlwZVtxdWVzdGlvblR5cGVLZXldCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCgogICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxba2V5XSA9IGF0dHJzW2tleV0KICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KQoKICAgICAgICAgICAgICBxLmNvbXBvbmVudEluc3RhbmNlLnF1ZXN0aW9uID0gbW9kZWwKCiAgICAgICAgICAgICAgbW9kZWwucmVzZXRPcHRpb25zKCkKCiAgICAgICAgICAgICAgcXVlc3Rpb25zLnB1c2gobW9kZWwpCiAgICAgICAgICAgIH0pCiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcXVlc3Rpb25zCiAgICAgIH0KICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIFJldHVybnMgY3VycmVudGx5IGFjdGl2ZSBxdWVzdGlvbiBjb21wb25lbnQgKGlmIGFueSkuCiAgICAgKi8KICAgIGFjdGl2ZVF1ZXN0aW9uQ29tcG9uZW50KCkgewogICAgICBpZiAodGhpcy4kcmVmcy5xdWVzdGlvbnMpIHsKICAgICAgICByZXR1cm4gdGhpcy4kcmVmcy5xdWVzdGlvbnNbdGhpcy5hY3RpdmVRdWVzdGlvbkluZGV4XQogICAgICB9CgogICAgICByZXR1cm4gbnVsbAogICAgfSwKCiAgICBzZXRRdWVzdGlvbnMoKSB7CiAgICAgIHRoaXMuc2V0UXVlc3Rpb25MaXN0QWN0aXZlUGF0aCgpCiAgICAgIHRoaXMuc2V0UXVlc3Rpb25MaXN0KCkKICAgIH0sCgogICAgLyoqCiAgICAgKiBUaGlzIG1ldGhvZCBnb2VzIHRocm91Z2ggYWxsIHF1ZXN0aW9ucyBhbmQgc2V0cyB0aGUgb25lcwogICAgICogdGhhdCBhcmUgaW4gdGhlIGN1cnJlbnQgcGF0aCAodGFraW5nIG5vdGUgb2YgbG9naWMganVtcHMpCiAgICAgKi8KICAgIHNldFF1ZXN0aW9uTGlzdEFjdGl2ZVBhdGgoKSB7CiAgICAgIGNvbnN0IHF1ZXN0aW9ucyA9IFtdCgogICAgICBpZiAoIXRoaXMucXVlc3Rpb25Nb2RlbHMubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGxldAogICAgICAgIGluZGV4ID0gMCwKICAgICAgICBzZXJpYWxJbmRleCA9IDAsCiAgICAgICAgbmV4dElkCgogICAgICBkbyB7CiAgICAgICAgbGV0IHF1ZXN0aW9uID0gdGhpcy5xdWVzdGlvbk1vZGVsc1tpbmRleF0KCiAgICAgICAgcXVlc3Rpb24uc2V0SW5kZXgoc2VyaWFsSW5kZXgpCiAgICAgICAgcXVlc3Rpb24ubGFuZ3VhZ2UgPSB0aGlzLmxhbmd1YWdlCgogICAgICAgIHF1ZXN0aW9ucy5wdXNoKHF1ZXN0aW9uKQoKICAgICAgICBpZiAoIXF1ZXN0aW9uLmp1bXApIHsKICAgICAgICAgICsraW5kZXgKICAgICAgICB9IGVsc2UgaWYgKHF1ZXN0aW9uLmFuc3dlcmVkKSB7CiAgICAgICAgICBuZXh0SWQgPSBxdWVzdGlvbi5nZXRKdW1wSWQoKQogICAgICAgICAgaWYgKG5leHRJZCkgewogICAgICAgICAgICBpZiAobmV4dElkID09PSAnX3N1Ym1pdCcpIHsKICAgICAgICAgICAgICBpbmRleCA9IHRoaXMucXVlc3Rpb25Nb2RlbHMubGVuZ3RoCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnF1ZXN0aW9uTW9kZWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodGhpcy5xdWVzdGlvbk1vZGVsc1tpXS5pZCA9PT0gbmV4dElkKSB7CiAgICAgICAgICAgICAgICAgIGluZGV4ID0gaQogICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgKytpbmRleAogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpbmRleCA9IHRoaXMucXVlc3Rpb25Nb2RlbHMubGVuZ3RoCiAgICAgICAgfQoKICAgICAgICArK3NlcmlhbEluZGV4CiAgICAgIH0gd2hpbGUgKGluZGV4IDwgdGhpcy5xdWVzdGlvbk1vZGVscy5sZW5ndGgpCgogICAgICB0aGlzLnF1ZXN0aW9uTGlzdEFjdGl2ZVBhdGggPSBxdWVzdGlvbnMKICAgIH0sCgogICAgLyoqCiAgICAgKiBTZXRzIHRoZSBxdWVzdGlvbiBsaXN0IGFycmF5CiAgICAgKiAoYWxsIHF1ZXN0aW9ucyB1cCB0bywgYW5kIGluY2x1ZGluZywgdGhlIGN1cnJlbnQgb25lKQogICAgICovCiAgICBzZXRRdWVzdGlvbkxpc3QoKSB7CiAgICAgIGNvbnN0IHF1ZXN0aW9ucyA9IFtdCgogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5xdWVzdGlvbkxpc3RBY3RpdmVQYXRoLmxlbmd0aDsgaW5kZXgrKykgewogICAgICAgIGNvbnN0IHF1ZXN0aW9uID0gdGhpcy5xdWVzdGlvbkxpc3RBY3RpdmVQYXRoW2luZGV4XQoKICAgICAgICBxdWVzdGlvbnMucHVzaChxdWVzdGlvbikKCiAgICAgICAgaWYgKCFxdWVzdGlvbi5hbnN3ZXJlZCkgewogICAgICAgICAgaWYgKHRoaXMuY29tcGxldGVkKSB7CiAgICAgICAgICAgIC8vIFRoZSAiY29tcGxldGVkIiBzdGF0dXMgY2hhbmdlZCAtIHVzZXIgcHJvYmFibHkgY2hhbmdlZCBhbgogICAgICAgICAgICAvLyBhbHJlYWR5IGVudGVyZWQgYW5zd2VyLgogICAgICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlCiAgICAgICAgICB9CiAgICAgICAgICBicmVhawogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy5xdWVzdGlvbkxpc3QgPSBxdWVzdGlvbnMKICAgIH0sCgogICAgLyoqCiAgICAgKiBJZiB3ZSBoYXZlIGFueSBhbnN3ZXJlZCBxdWVzdGlvbnMsIG5vdGlmeSB1c2VyIGJlZm9yZSBsZWF2aW5nCiAgICAgKiB0aGUgcGFnZS4KICAgICAqLwogICAgb25CZWZvcmVVbmxvYWQoZXZlbnQpIHsKICAgICAgaWYgKHRoaXMuYWN0aXZlUXVlc3Rpb25JbmRleCA+IDAgJiYgIXRoaXMuc3VibWl0dGVkKSB7CiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKQogICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gJycKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIEdsb2JhbCBrZXkgbGlzdGVuZXJzLCBsaXN0ZW4gZm9yIEVudGVyIG9yIFRhYiBrZXkgZXZlbnRzLgogICAgICovCiAgICBvbktleURvd25MaXN0ZW5lcihlKSB7CiAgICAgIGlmIChlLmtleSAhPT0gJ1RhYicgfHwgdGhpcy5zdWJtaXR0ZWQpIHsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgaWYgKGUuc2hpZnRLZXkpIHsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpCiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpCgogICAgICAgIGlmICh0aGlzLm5hdmlnYXRpb24pIHsKICAgICAgICAgIHRoaXMuZ29Ub1ByZXZpb3VzUXVlc3Rpb24oKQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBxID0gdGhpcy5hY3RpdmVRdWVzdGlvbkNvbXBvbmVudCgpCgogICAgICAgIGlmIChxLnNob3VsZEZvY3VzKCkpIHsKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKQoKICAgICAgICAgIHEuZm9jdXNGaWVsZCgpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCkKCiAgICAgICAgICB0aGlzLmVtaXRUYWIoKQogICAgICAgICAgdGhpcy5yZXZlcnNlID0gZmFsc2UKICAgICAgICB9CiAgICAgIH0KICAgIH0sIAoKICAgIG9uS2V5VXBMaXN0ZW5lcihlKSB7CiAgICAgIGlmIChlLnNoaWZ0S2V5IHx8IFsnVGFiJywgJ0VudGVyJ10uaW5kZXhPZihlLmtleSkgPT09IC0xIHx8IHRoaXMuc3VibWl0dGVkKSB7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KCiAgICAgIGNvbnN0IHEgPSB0aGlzLmFjdGl2ZVF1ZXN0aW9uQ29tcG9uZW50KCkKCiAgICAgIGlmIChlLmtleSA9PT0gJ1RhYicgJiYgcS5zaG91bGRGb2N1cygpKSB7CiAgICAgICAgcS5mb2N1c0ZpZWxkKCkKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicpIHsKICAgICAgICAgIHRoaXMuZW1pdEVudGVyKCkKICAgICAgICB9IAoKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpCiAgICAgICAgdGhpcy5yZXZlcnNlID0gZmFsc2UKICAgICAgfQogICAgfSwKCiAgICBlbWl0RW50ZXIoKSB7CiAgICAgIGNvbnN0IHEgPSB0aGlzLmFjdGl2ZVF1ZXN0aW9uQ29tcG9uZW50KCkKCiAgICAgIGlmIChxKSB7CiAgICAgICAgLy8gU2VuZCBlbnRlciBldmVudCB0byB0aGUgY3VycmVudCBxdWVzdGlvbiBjb21wb25lbnQKICAgICAgICBxLm9uRW50ZXIoKQogICAgICB9IGVsc2UgaWYgKHRoaXMuY29tcGxldGVkICYmIHRoaXMuaXNPbkxhc3RTdGVwKSB7CiAgICAgICAgLy8gV2UncmUgZmluaXNoZWQgLSBzdWJtaXQgZm9ybQogICAgICAgIHRoaXMuc3VibWl0KCkKICAgICAgfQogICAgfSwKCiAgICBlbWl0VGFiKCkgewogICAgICBjb25zdCBxID0gdGhpcy5hY3RpdmVRdWVzdGlvbkNvbXBvbmVudCgpCgogICAgICBpZiAocSkgewogICAgICAgIC8vIFNlbmQgdGFiIGV2ZW50IHRvIHRoZSBjdXJyZW50IHF1ZXN0aW9uIGNvbXBvbmVudAogICAgICAgIHEub25UYWIoKQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZW1pdEVudGVyKCkKICAgICAgfQogICAgfSwKCiAgICBzdWJtaXQoKSB7CiAgICAgIHRoaXMuZW1pdFN1Ym1pdCgpCiAgICAgIHRoaXMuc3VibWl0dGVkID0gdHJ1ZQogICAgfSwKCiAgICBlbWl0Q29tcGxldGUoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2NvbXBsZXRlJywgdGhpcy5jb21wbGV0ZWQsIHRoaXMucXVlc3Rpb25MaXN0KQogICAgfSwKCiAgICBlbWl0U3VibWl0KCkgewogICAgICB0aGlzLiRlbWl0KCdzdWJtaXQnLCB0aGlzLnF1ZXN0aW9uTGlzdCkKICAgIH0sCgogICAgLyoqCiAgICAgKiBDaGVja3MgaWYgd2UgaGF2ZSBhbm90aGVyIHF1ZXN0aW9uIGFuZCBpZiB3ZQogICAgICogY2FuIGp1bXAgdG8gaXQuCiAgICAgKi8KICAgIGlzTmV4dFF1ZXN0aW9uQXZhaWxhYmxlKCkgewogICAgICBpZiAodGhpcy5zdWJtaXR0ZWQpIHsKICAgICAgICByZXR1cm4gZmFsc2UKICAgICAgfQoKICAgICAgY29uc3QgcSA9IHRoaXMuYWN0aXZlUXVlc3Rpb24KICAgICAgaWYgKHEgJiYgIXEucmVxdWlyZWQpIHsKICAgICAgICByZXR1cm4gdHJ1ZQogICAgICB9CgogICAgICBpZiAodGhpcy5jb21wbGV0ZWQgJiYgIXRoaXMuaXNPbkxhc3RTdGVwKSB7CiAgICAgICAgcmV0dXJuIHRydWUKICAgICAgfQogCiAgICAgIHJldHVybiB0aGlzLmFjdGl2ZVF1ZXN0aW9uSW5kZXggPCB0aGlzLnF1ZXN0aW9uTGlzdC5sZW5ndGggLSAxCiAgICB9LAoKICAgIC8qKgogICAgICogVHJpZ2dlcmVkIGJ5IHRoZSAiYW5zd2VyIiBldmVudCBpbiB0aGUgUXVlc3Rpb24gY29tcG9uZW50CiAgICAgKi8KICAgIG9uUXVlc3Rpb25BbnN3ZXJlZChxdWVzdGlvbikgewogICAgICBpZiAocXVlc3Rpb24uaXNWYWxpZCgpKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnYW5zd2VyJywgcXVlc3Rpb24ucXVlc3Rpb24pCgogICAgICAgIGlmICh0aGlzLmFjdGl2ZVF1ZXN0aW9uSW5kZXggPCB0aGlzLnF1ZXN0aW9uTGlzdEFjdGl2ZVBhdGgubGVuZ3RoKSB7CiAgICAgICAgICArK3RoaXMuYWN0aXZlUXVlc3Rpb25JbmRleAogICAgICAgIH0KICAgICAgIAogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuc2V0UXVlc3Rpb25zKCkKICAgICAgICAgIHRoaXMuY2hlY2tUaW1lcigpCiAgICAgICAgICAvLyBOZXN0ZWQgJG5leHRUaWNrIHNvIHdlJ3JlIDEwMCUgc3VyZSB0aGF0IHNldFF1ZXN0aW9ucwogICAgICAgICAgLy8gYWN0dWFsbHkgdXBkYXRlZCB0aGUgcXVlc3Rpb24gYXJyYXkKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgY29uc3QgcSA9IHRoaXMuYWN0aXZlUXVlc3Rpb25Db21wb25lbnQoKQoKICAgICAgICAgICAgaWYgKHEpIHsKICAgICAgICAgICAgICBxLmZvY3VzRmllbGQoKQogICAgICAgICAgICAgIHRoaXMuYWN0aXZlUXVlc3Rpb25JbmRleCA9IHEucXVlc3Rpb24uaW5kZXgKICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzT25MYXN0U3RlcCkgewogICAgICAgICAgICAgIC8vIE5vIG1vcmUgcXVlc3Rpb25zIGxlZnQgLSBzZXQgImNvbXBsZXRlZCIgdG8gdHJ1ZQogICAgICAgICAgICAgIHRoaXMuY29tcGxldGVkID0gdHJ1ZQogICAgICAgICAgICAgIHRoaXMuYWN0aXZlUXVlc3Rpb25JbmRleCA9IHRoaXMucXVlc3Rpb25MaXN0QWN0aXZlUGF0aC5sZW5ndGgKICAgICAgICAgICAgICAKICAgICAgICAgICAgICB0aGlzLiRyZWZzLmJ1dHRvbiAmJiB0aGlzLiRyZWZzLmJ1dHRvbi5mb2N1cygpCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ3N0ZXAnLCB0aGlzLmFjdGl2ZVF1ZXN0aW9uSWQsIHRoaXMuYWN0aXZlUXVlc3Rpb24pCiAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgIH0gZWxzZSBpZiAodGhpcy5jb21wbGV0ZWQpIHsKICAgICAgICB0aGlzLmNvbXBsZXRlZCA9IGZhbHNlCiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBKdW1wcyB0byBwcmV2aW91cyBxdWVzdGlvbi4KICAgICAqLwogICAgZ29Ub1ByZXZpb3VzUXVlc3Rpb24oKSB7CiAgICAgIHRoaXMuYmx1ckZvY3VzKCkKICAKICAgICAgaWYgKHRoaXMuYWN0aXZlUXVlc3Rpb25JbmRleCA+IDAgJiYgIXRoaXMuc3VibWl0dGVkKSB7CiAgICAgICAgaWYgKHRoaXMuaXNPblRpbWVyU3RvcFN0ZXApIHsKICAgICAgICAgIHRoaXMuc3RhcnRUaW1lcigpCiAgICAgICAgfQoKICAgICAgICAtLXRoaXMuYWN0aXZlUXVlc3Rpb25JbmRleAoKICAgICAgICB0aGlzLnJldmVyc2UgPSB0cnVlCgogICAgICAgIHRoaXMuY2hlY2tUaW1lcigpCiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBKdW1wcyB0byBuZXh0IHF1ZXN0aW9uLgogICAgICovCiAgICBnb1RvTmV4dFF1ZXN0aW9uKCkgewogICAgICB0aGlzLmJsdXJGb2N1cygpCiAgICAgIGlmICh0aGlzLmlzTmV4dFF1ZXN0aW9uQXZhaWxhYmxlKCkpIHsKICAgICAgICB0aGlzLmVtaXRFbnRlcigpCiAgICAgIH0KCiAgICAgIHRoaXMucmV2ZXJzZSA9IGZhbHNlCiAgICB9LAoKICAgIC8qKgogICAgICogUmVtb3ZlcyBmb2N1cyBmcm9tIHRoZSBjdXJyZW50bHkgZm9jdXNlZCBET00gZWxlbWVudC4KICAgICAqLwogICAgYmx1ckZvY3VzKCkgewogICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1ciAmJiBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKQogICAgfSwKCiAgICBjaGVja1RpbWVyKCkgewogICAgICBpZiAodGhpcy50aW1lcikgewogICAgICAgIGlmICh0aGlzLmlzT25UaW1lclN0YXJ0U3RlcCkgewogICAgICAgICAgdGhpcy5zdGFydFRpbWVyKCkKICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaXNPblRpbWVyU3RvcFN0ZXApIHsKICAgICAgICAgIHRoaXMuc3RvcFRpbWVyKCkKICAgICAgICB9CiAgICAgIH0KICAgIH0sCgogICAgc3RhcnRUaW1lcigpIHsKICAgICAgaWYgKHRoaXMudGltZXIgJiYgIXRoaXMudGltZXJPbikgewogICAgICAgIHRoaXMudGltZXJJbnRlcnZhbCA9IHNldEludGVydmFsKHRoaXMuaW5jcmVtZW50VGltZSwgMTAwMCkKICAgICAgICB0aGlzLnRpbWVyT24gPSB0cnVlCiAgICAgIH0KICAgIH0sCgogICAgc3RvcFRpbWVyKCkgewogICAgICBpZiAodGhpcy50aW1lck9uKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpbWVySW50ZXJ2YWwpCiAgICAgIH0KCiAgICAgIHRoaXMudGltZXJPbiA9IGZhbHNlCiAgICB9LAoKICAgIGluY3JlbWVudFRpbWUoKSB7CiAgICAgICsrdGhpcy50aW1lCiAgICAgIAogICAgICB0aGlzLiRlbWl0KCd0aW1lcicsIHRoaXMudGltZSwgdGhpcy5mb3JtYXRUaW1lKHRoaXMudGltZSkpCiAgICB9LAoKICAgIGZvcm1hdFRpbWUoc2Vjb25kcykgewogICAgICBsZXQKICAgICAgICBzdGFydEluZGV4ID0gMTQsCiAgICAgICAgbGVuZ3RoID0gNQogICAgICAgICAgCiAgICAgIGlmIChzZWNvbmRzID49IDYwICogNjApIHsKICAgICAgICBzdGFydEluZGV4ID0gMTEKICAgICAgICBsZW5ndGggPSA4CiAgICAgIH0KCiAgICAgIHJldHVybiBuZXcgRGF0ZSgxMDAwICogc2Vjb25kcykudG9JU09TdHJpbmcoKS5zdWJzdHIoc3RhcnRJbmRleCwgbGVuZ3RoKQogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBjb21wbGV0ZWQoKSB7CiAgICAgIHRoaXMuZW1pdENvbXBsZXRlKCkKICAgIH0sCiAgICAKICAgIHN1Ym1pdHRlZCgpIHsKICAgICAgdGhpcy5zdG9wVGltZXIoKQogICAgfQogIH0KfQo="},{"version":3,"sources":["FlowForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6HA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"FlowForm.vue","sourceRoot":"src/components","sourcesContent":["// Form template and logic\n\n<template>\n  <div class=\"vff\" :class=\"{'vff-not-standalone': !standalone, 'vff-is-mobile': isMobile, 'vff-is-ios': isIos}\">\n    <div class=\"f-container\">\n      <div class=\"f-form-wrap\">\n        <flow-form-question\n          ref=\"questions\"\n          v-for=\"(q, index) in questionList\"\n          v-bind:question=\"q\"\n          v-bind:language=\"language\"\n          v-bind:key=\"'q' + index\"\n          v-bind:active=\"q.index === activeQuestionIndex\"\n          v-model=\"q.answer\"\n          v-on:answer=\"onQuestionAnswered\"\n          v-bind:reverse=\"reverse\"\n        />\n\n        <slot></slot>\n\n        <!-- Complete/Submit screen slots -->   \n        <div v-if=\"isOnLastStep\" class=\"vff-animate f-fade-in-up field-submittype\">\n          <slot name=\"complete\">\n            <!-- Default content for the \"complete\" slot -->\n            <div class=\"f-section-wrap\">\n              <p>\n                <span class=\"fh2\">{{ language.thankYouText }}</span>\n              </p>\n            </div>\n          </slot>\n\n          <slot name=\"completeButton\">\n            <!-- Default content for the \"completeButton\" slot -->\n            <button \n              class=\"o-btn-action\"\n              ref=\"button\" \n              type=\"button\" \n              href=\"#\" \n              v-on:click.prevent=\"submit()\" \n              v-if=\"!submitted\"\n              v-bind:aria-label=\"language.ariaSubmitText\">\n                <span>{{ language.submitText }}</span>\n            </button>\n            <a \n              class=\"f-enter-desc\"\n              href=\"#\"\n              v-on:click.prevent=\"submit()\"\n              v-if=\"!submitted\"\n              v-html=\"language.formatString(language.pressEnter)\">\n            </a>\n            <p class=\"text-success\" v-if=\"submitted\">{{ language.successText }}</p>\n          </slot>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"vff-footer\">\n      <div class=\"footer-inner-wrap\">\n        <div v-if=\"progressbar\" class=\"f-progress\" v-bind:class=\"{'not-started': percentCompleted === 0, 'completed': percentCompleted === 100}\">\n          <div class=\"f-progress-bar\">\n            <div class=\"f-progress-bar-inner\" v-bind:style=\"'width: ' + percentCompleted + '%;'\"></div>\n          </div>\n          {{ language.percentCompleted.replace(':percent', percentCompleted) }}\n        </div>\n        <div v-if=\"navigation\" class=\"f-nav\">\n          <a\n            class=\"f-prev\"\n            href=\"#\"\n            v-bind:class=\"{'f-disabled': activeQuestionIndex === 0 || submitted}\"\n            v-on:click.prevent=\"goToPreviousQuestion()\"\n            role=\"button\"\n            v-bind:aria-label=\"language.ariaPrev\"\n          >\n            <svg\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              x=\"0px\"\n              y=\"0px\"\n              width=\"42.333px\"\n              height=\"28.334px\"\n              viewBox=\"78.833 5.5 42.333 28.334\"\n              aria-hidden=\"true\"\n            >\n              <path\n                d=\"M82.039,31.971L100,11.442l17.959,20.529L120,30.187L101.02,8.492c-0.258-0.295-0.629-0.463-1.02-0.463c-0.39,0-0.764,0.168-1.02,0.463L80,30.187L82.039,31.971z\"\n              />\n            </svg>\n            <span class=\"f-nav-text\" aria-hidden=\"true\">{{ language.prev }}</span>\n          </a>\n          <a\n            class=\"f-next\"\n            href=\"#\"\n            v-bind:class=\"{'f-disabled': !isNextQuestionAvailable()}\"\n            v-on:click.prevent=\"goToNextQuestion()\"\n            role=\"button\"\n            v-bind:aria-label=\"language.ariaNext\"\n          >\n            <svg\n              version=\"1.1\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n              xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n              x=\"0px\"\n              y=\"0px\"\n              width=\"42.333px\"\n              height=\"28.334px\"\n              viewBox=\"78.833 5.5 42.333 28.334\"\n              aria-hidden=\"true\"\n            >\n              <path\n                d=\"M117.963,8.031l-17.961,20.529L82.042,8.031l-2.041,1.784l18.98,21.695c0.258,0.295,0.629,0.463,1.02,0.463c0.39,0,0.764-0.168,1.02-0.463l18.98-21.695L117.963,8.031z\"\n              />\n            </svg>\n            <span class=\"f-nav-text\" aria-hidden=\"true\">{{ language.next }}</span>\n          </a>\n        </div>\n        <div v-if=\"timer\" class=\"f-timer\">\n          <span>{{ formatTime(time) }}</span>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\n  /*!\n    Copyright (c) 2020 - present, DITDOT Ltd. - MIT Licence\n    https://github.com/ditdot-dev/vue-flow-form\n    https://www.ditdot.hr/en\n  */\n\n  import FlowFormQuestion from './FlowFormQuestion.vue'\n  import QuestionModel, { ChoiceOption, LinkOption, QuestionType } from '../models/QuestionModel'\n  import LanguageModel from '../models/LanguageModel'\n  import { IsMobile } from '../mixins/IsMobile'\n\n  export default {\n    name: 'FlowForm',\n    components: {\n      FlowFormQuestion\n    },\n    \n    props: {\n      questions: {\n        type: Array,\n        validator: value => value.every(q => q instanceof QuestionModel)\n      }, \n      language: {\n        type: LanguageModel,\n        default: () => new LanguageModel()\n      },\n      progressbar: {\n        type: Boolean, \n        default: true\n      },\n      standalone: {\n        type: Boolean, \n        default: true\n      },\n      navigation: {\n        type: Boolean, \n        default: true\n      },\n      timer: {\n        type: Boolean,\n        default: false\n      },\n      timerStartStep: [String, Number],\n      timerStopStep: [String, Number]\n    },\n\n    mixins: [\n      IsMobile,\n    ],\n\n    data() {\n      return {\n        completed: false,\n        submitted: false,\n        activeQuestionIndex: 0,\n        questionList: [],\n        questionListActivePath: [],\n        reverse: false,\n        timerOn: false,\n        timerInterval: null,\n        time: 0\n      }\n    },\n\n    mounted() {\n      document.addEventListener('keydown', this.onKeyDownListener)\n      document.addEventListener('keyup', this.onKeyUpListener, true)\n      window.addEventListener('beforeunload', this.onBeforeUnload)\n\n      this.setQuestions()\n      this.checkTimer()\n    },\n\n    beforeDestroy() {\n      document.removeEventListener('keydown', this.onKeyDownListener)\n      document.removeEventListener('keyup', this.onKeyUpListener, true)\n      window.removeEventListener('beforeunload', this.onBeforeUnload)\n      \n      this.stopTimer()\n    },\n\n    computed: {\n      numActiveQuestions() {\n        return this.questionListActivePath.length\n      },\n\n      activeQuestion() {\n        return this.questionListActivePath[this.activeQuestionIndex]\n      },\n\n      activeQuestionId() {\n        const question = this.questionModels[this.activeQuestionIndex]\n\n        if (this.isOnLastStep) {\n          return '_submit'\n        }\n\n        if (question && question.id) {\n          return question.id\n        }\n\n        return null\n      },\n\n      numCompletedQuestions() {\n        let num = 0\n\n        this.questionListActivePath.forEach(question => {\n          if (question.answered) {\n            ++num\n          }\n        })\n\n        return num\n      },\n\n      percentCompleted() {\n        if (!this.numActiveQuestions) {\n          return 0\n        }\n\n        return Math.floor((this.numCompletedQuestions / this.numActiveQuestions) * 100)\n      },\n\n      isOnLastStep() {\n        return this.numActiveQuestions > 0 && this.activeQuestionIndex === this.questionListActivePath.length\n      }, \n\n      isOnTimerStartStep() {\n        if (this.activeQuestionId === this.timerStartStep) {\n          return true\n        }\n\n        if (!this.timerOn && !this.timerStartStep && this.activeQuestionIndex === 0) {\n          return true\n        }\n\n        return false\n      },\n\n      isOnTimerStopStep() {\n        if (this.submitted) {\n          return true\n        }\n        \n        if (this.activeQuestionId === this.timerStopStep) {\n          return true \n        }\n\n        return false\n      },\n\n      questionModels: {\n        cache: false,\n\n        get() {\n          if (this.questions && this.questions.length) {\n            return this.questions\n          }\n\n          const questions = []\n\n          if (!this.questions) {\n            const classMap = {\n              'options': ChoiceOption,\n              'descriptionLink': LinkOption\n            }\n\n            this\n              .$slots\n              .default\n              .filter(q => q.tag && q.tag.indexOf('Question') !== -1)\n              .forEach(q => {\n                const attrs = q.data.attrs\n                let model = new QuestionModel()\n\n                if (q.componentInstance.question !== null) {\n                  model = q.componentInstance.question\n                } \n\n                if (q.data.model) {\n                  model.answer = q.data.model.value\n                }\n\n                Object.keys(model).forEach(key => {\n                  if (attrs[key] !== undefined) {\n                    if (typeof model[key] === 'boolean') {\n                      model[key] = attrs[key] !== false\n                    } else if (key in classMap) {\n                      const\n                        classReference = classMap[key],\n                        options = []\n\n                      attrs[key].forEach(option => {\n                        const instance = new classReference()\n\n                        Object.keys(instance).forEach(instanceKey => {\n                          if (option[instanceKey] !== undefined) {\n                            instance[instanceKey] = option[instanceKey]\n                          }\n                        })\n\n                        options.push(instance)\n                      })\n\n                      model[key] = options\n                    } else {\n                      switch(key) {\n                        case 'type':\n                          if (Object.values(QuestionType).indexOf(attrs[key]) !== -1) {\n                            model[key] = attrs[key]\n                          } else {\n                            for (const questionTypeKey in QuestionType) {\n                              if (questionTypeKey.toLowerCase() === attrs[key].toLowerCase()) {\n                                model[key] = QuestionType[questionTypeKey]\n                                break\n                              }\n                            }\n                          }\n                          break\n\n                        default:\n                          model[key] = attrs[key]\n                          break\n                      }\n                    }\n                  }\n                })\n\n                q.componentInstance.question = model\n\n                model.resetOptions()\n\n                questions.push(model)\n              })\n          }\n\n          return questions\n        }\n      }\n    },\n\n    methods: {\n      /**\n       * Returns currently active question component (if any).\n       */\n      activeQuestionComponent() {\n        if (this.$refs.questions) {\n          return this.$refs.questions[this.activeQuestionIndex]\n        }\n\n        return null\n      },\n\n      setQuestions() {\n        this.setQuestionListActivePath()\n        this.setQuestionList()\n      },\n\n      /**\n       * This method goes through all questions and sets the ones\n       * that are in the current path (taking note of logic jumps)\n       */\n      setQuestionListActivePath() {\n        const questions = []\n\n        if (!this.questionModels.length) {\n          return\n        }\n\n        let\n          index = 0,\n          serialIndex = 0,\n          nextId\n\n        do {\n          let question = this.questionModels[index]\n\n          question.setIndex(serialIndex)\n          question.language = this.language\n\n          questions.push(question)\n\n          if (!question.jump) {\n            ++index\n          } else if (question.answered) {\n            nextId = question.getJumpId()\n            if (nextId) {\n              if (nextId === '_submit') {\n                index = this.questionModels.length\n              } else {\n                for (let i = 0; i < this.questionModels.length; i++) {\n                  if (this.questionModels[i].id === nextId) {\n                    index = i\n                    break\n                  }\n                }\n              }\n            } else {\n              ++index\n            }\n          } else {\n            index = this.questionModels.length\n          }\n\n          ++serialIndex\n        } while (index < this.questionModels.length)\n\n        this.questionListActivePath = questions\n      },\n\n      /**\n       * Sets the question list array\n       * (all questions up to, and including, the current one)\n       */\n      setQuestionList() {\n        const questions = []\n\n        for (let index = 0; index < this.questionListActivePath.length; index++) {\n          const question = this.questionListActivePath[index]\n\n          questions.push(question)\n\n          if (!question.answered) {\n            if (this.completed) {\n              // The \"completed\" status changed - user probably changed an\n              // already entered answer.\n              this.completed = false\n            }\n            break\n          }\n        }\n\n        this.questionList = questions\n      },\n\n      /**\n       * If we have any answered questions, notify user before leaving\n       * the page.\n       */\n      onBeforeUnload(event) {\n        if (this.activeQuestionIndex > 0 && !this.submitted) {\n          event.preventDefault()\n          event.returnValue = ''\n        }\n      },\n\n      /**\n       * Global key listeners, listen for Enter or Tab key events.\n       */\n      onKeyDownListener(e) {\n        if (e.key !== 'Tab' || this.submitted) {\n          return\n        }\n\n        if (e.shiftKey) {\n          e.stopPropagation()\n          e.preventDefault()\n\n          if (this.navigation) {\n            this.goToPreviousQuestion()\n          }\n        } else {\n          const q = this.activeQuestionComponent()\n\n          if (q.shouldFocus()) {\n            e.preventDefault()\n\n            q.focusField()\n          } else {\n            e.stopPropagation()\n\n            this.emitTab()\n            this.reverse = false\n          }\n        }\n      }, \n\n      onKeyUpListener(e) {\n        if (e.shiftKey || ['Tab', 'Enter'].indexOf(e.key) === -1 || this.submitted) {\n          return\n        }\n\n        const q = this.activeQuestionComponent()\n\n        if (e.key === 'Tab' && q.shouldFocus()) {\n          q.focusField()\n        } else {\n          if (e.key === 'Enter') {\n            this.emitEnter()\n          } \n\n          e.stopPropagation()\n          this.reverse = false\n        }\n      },\n\n      emitEnter() {\n        const q = this.activeQuestionComponent()\n\n        if (q) {\n          // Send enter event to the current question component\n          q.onEnter()\n        } else if (this.completed && this.isOnLastStep) {\n          // We're finished - submit form\n          this.submit()\n        }\n      },\n\n      emitTab() {\n        const q = this.activeQuestionComponent()\n\n        if (q) {\n          // Send tab event to the current question component\n          q.onTab()\n        } else {\n          this.emitEnter()\n        }\n      },\n\n      submit() {\n        this.emitSubmit()\n        this.submitted = true\n      },\n\n      emitComplete() {\n        this.$emit('complete', this.completed, this.questionList)\n      },\n\n      emitSubmit() {\n        this.$emit('submit', this.questionList)\n      },\n\n      /**\n       * Checks if we have another question and if we\n       * can jump to it.\n       */\n      isNextQuestionAvailable() {\n        if (this.submitted) {\n          return false\n        }\n\n        const q = this.activeQuestion\n        if (q && !q.required) {\n          return true\n        }\n\n        if (this.completed && !this.isOnLastStep) {\n          return true\n        }\n   \n        return this.activeQuestionIndex < this.questionList.length - 1\n      },\n\n      /**\n       * Triggered by the \"answer\" event in the Question component\n       */\n      onQuestionAnswered(question) {\n        if (question.isValid()) {\n          this.$emit('answer', question.question)\n\n          if (this.activeQuestionIndex < this.questionListActivePath.length) {\n            ++this.activeQuestionIndex\n          }\n         \n          this.$nextTick(() => {\n            this.setQuestions()\n            this.checkTimer()\n            // Nested $nextTick so we're 100% sure that setQuestions\n            // actually updated the question array\n            this.$nextTick(() => {\n              const q = this.activeQuestionComponent()\n\n              if (q) {\n                q.focusField()\n                this.activeQuestionIndex = q.question.index\n              } else if (this.isOnLastStep) {\n                // No more questions left - set \"completed\" to true\n                this.completed = true\n                this.activeQuestionIndex = this.questionListActivePath.length\n                \n                this.$refs.button && this.$refs.button.focus()\n              }\n\n              this.$emit('step', this.activeQuestionId, this.activeQuestion)\n            })\n          })\n        } else if (this.completed) {\n          this.completed = false\n        }\n      },\n\n      /**\n       * Jumps to previous question.\n       */\n      goToPreviousQuestion() {\n        this.blurFocus()\n    \n        if (this.activeQuestionIndex > 0 && !this.submitted) {\n          if (this.isOnTimerStopStep) {\n            this.startTimer()\n          }\n\n          --this.activeQuestionIndex\n\n          this.reverse = true\n\n          this.checkTimer()\n        }\n      },\n\n      /**\n       * Jumps to next question.\n       */\n      goToNextQuestion() {\n        this.blurFocus()\n        if (this.isNextQuestionAvailable()) {\n          this.emitEnter()\n        }\n\n        this.reverse = false\n      },\n\n      /**\n       * Removes focus from the currently focused DOM element.\n       */\n      blurFocus() {\n        document.activeElement && document.activeElement.blur && document.activeElement.blur()\n      },\n\n      checkTimer() {\n        if (this.timer) {\n          if (this.isOnTimerStartStep) {\n            this.startTimer()\n          } else if (this.isOnTimerStopStep) {\n            this.stopTimer()\n          }\n        }\n      },\n\n      startTimer() {\n        if (this.timer && !this.timerOn) {\n          this.timerInterval = setInterval(this.incrementTime, 1000)\n          this.timerOn = true\n        }\n      },\n\n      stopTimer() {\n        if (this.timerOn) {\n          clearInterval(this.timerInterval)\n        }\n\n        this.timerOn = false\n      },\n\n      incrementTime() {\n        ++this.time\n        \n        this.$emit('timer', this.time, this.formatTime(this.time))\n      },\n\n      formatTime(seconds) {\n        let\n          startIndex = 14,\n          length = 5\n            \n        if (seconds >= 60 * 60) {\n          startIndex = 11\n          length = 8\n        }\n\n        return new Date(1000 * seconds).toISOString().substr(startIndex, length)\n      }\n    },\n\n    watch: {\n      completed() {\n        this.emitComplete()\n      },\n      \n      submitted() {\n        this.stopTimer()\n      }\n    }\n  }\n</script>\n\n<style lang=\"css\">\n  @import '../assets/css/common.css';\n</style>"]}]}